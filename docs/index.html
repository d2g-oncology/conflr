<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Client for Confluence API • conflr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Client for Confluence API">
<meta property="og:description" content="Provides utilities for working with various Confluence API 
    &lt;https://docs.atlassian.com/ConfluenceServer/rest/latest/&gt;, including a
    functionality to convert an R Markdown document to Confluence format and
    upload it to Confluence automatically.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">conflr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/line/conflr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="conflr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#conflr" class="anchor"></a>conflr</h1></div>
<!-- badges: start -->

<p>conflr is an R package to post <a href="https://rmarkdown.rstudio.com/">R Markdown</a> documents to <a href="https://www.atlassian.com/software/confluence">Confluence</a>, a content collaboration tool by Atlassian.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install conflr from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"conflr"</span>)</pre></div>
<p>Alternatively, if you need the development version, install it with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"line/conflr"</span>)</pre></div>
</div>
<div id="preparation" class="section level2">
<h2 class="hasAnchor">
<a href="#preparation" class="anchor"></a>Preparation</h2>
<p>conflr uses these environmental variables to access your Confluence.</p>
<ul>
<li>
<code>CONFLUENCE_URL</code>: The base URL of your Confluence. e.g. <code>https://confluence.example.com</code> (On Atlassian Cloud, <code>https://&lt;your-domain&gt;.atlassian.net/wiki</code>).</li>
<li>
<code>CONFLUENCE_USERNAME</code>: Your username (On Atlassian Cloud, your email address).</li>
<li>
<code>CONFLUENCE_PASSWORD</code>: Your password (On Atlassian Cloud, your API token. For more details about API token, please read <a href="https://confluence.atlassian.com/cloud/api-tokens-938839638.html">the official document</a>).</li>
</ul>
<p>There are several ways to set these environmental variables. The quickest way is to enter in the popups that are displayed when you run the addin (see Usages section below). The inputs are cached in the environmental variables listed above by default.</p>
<p>Another way is to set the variables in the <code>.Renviron</code> file (you can open the file with <code><a href="https://usethis.r-lib.org/reference/edit.html">usethis::edit_r_environ()</a></code>). For example, you can set the base URL in the file as the following.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>CONFLUENCE_URL=https<span class="op">:</span><span class="er">//</span>confluence.example.com</span></code></pre></div>
</div>
<div id="usages" class="section level2">
<h2 class="hasAnchor">
<a href="#usages" class="anchor"></a>Usages</h2>
<p>conflr provides the following ways to post R Markdown documents to Confluence.</p>
<ol>
<li>Use an RStudio Addin</li>
<li>Run <code><a href="https://rdrr.io/pkg/conflr/man/confluence_document.html">confl_create_post_from_Rmd()</a></code> on console</li>
<li>Specify <code><a href="https://rdrr.io/pkg/conflr/man/confluence_document.html">conflr::confluence_document</a></code> on the YAML front-matter</li>
</ol>
<div id="rstudio-addin" class="section level3">
<h3 class="hasAnchor">
<a href="#rstudio-addin" class="anchor"></a>RStudio Addin</h3>
<div id="1-move-focus-to-the-rmd-file-and-click-post-to-confluence-addin" class="section level4">
<h4 class="hasAnchor">
<a href="#1-move-focus-to-the-rmd-file-and-click-post-to-confluence-addin" class="anchor"></a>1. Move focus to the .Rmd file and click “Post to Confluence” Addin</h4>
<p>(<strong>Caution for those who are not familiar with R Markdown</strong>: R Markdown’s powerfulness allows you to execute arbitrary code; be sure about what the code does before clicking “Post to Confluence”!)</p>
<p><img src="reference/figures/screenshot1.png"></p>
<p><img src="reference/figures/screenshot2.png"></p>
<p>Then, you will be asked your username and password.</p>
<p><img src="reference/figures/popup1.png"></p>
</div>
<div id="2-check-the-preview-and-click-publish" class="section level4">
<h4 class="hasAnchor">
<a href="#2-check-the-preview-and-click-publish" class="anchor"></a>2. Check the preview and click “Publish”</h4>
<ul>
<li>
<strong>type</strong>: The type of the page (<em>page</em> means a normal wiki page, whereas <em>blogpost</em> mean a blog post, not a page).</li>
<li>
<strong>Space Key</strong>: The key of the space you want to post.</li>
<li>
<strong>Parent page ID</strong>: (optional): The ID of the parent page to the page.</li>
<li>
<strong>Use original image sizes</strong>: If checked, do not resize the images.</li>
<li>
<strong>Fold code blocks</strong>: If checked, code blocks are folded by default.</li>
<li>
<strong>TOC</strong>: If checked, add a Table of Contents.</li>
<li>
<strong>TOC depth</strong>: The lowest heading level to include in the Table of Contents.</li>
</ul>
<p><img src="reference/figures/screenshot3.png"></p>
</div>
<div id="3-check-the-result" class="section level4">
<h4 class="hasAnchor">
<a href="#3-check-the-result" class="anchor"></a>3. Check the result</h4>
<p><img src="reference/figures/screenshot4.png"></p>
</div>
</div>
<div id="confl_create_post_from_rmd" class="section level3">
<h3 class="hasAnchor">
<a href="#confl_create_post_from_rmd" class="anchor"></a><code>confl_create_post_from_Rmd()</code>
</h3>
<p>If you don’t use RStudio, you can use <code><a href="https://rdrr.io/pkg/conflr/man/confluence_document.html">confl_create_post_from_Rmd()</a></code>. The basic usage is</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu">confl_create_post_from_Rmd</span>(<span class="st">"~/path/to/your.Rmd"</span>)</pre></div>
<div id="batch-use" class="section level4">
<h4 class="hasAnchor">
<a href="#batch-use" class="anchor"></a>Batch use</h4>
<p>If you want to use this function without interaction, specify <code>interactive = FALSE</code>. This skips any confirmations or previews.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="fu">confl_create_post_from_Rmd</span>(<span class="st">"~/path/to/your.Rmd"</span>, <span class="kw">interactive</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></div>
<p>Note that, if you want to run this periodically, you also need to set <code>update = TRUE</code> to allow conflr to overwrite the existing page.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu">confl_create_post_from_Rmd</span>(<span class="st">"~/path/to/your.Rmd"</span>, <span class="kw">interactive</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">update</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
</div>
</div>
<div id="conflrconflence_document" class="section level3">
<h3 class="hasAnchor">
<a href="#conflrconflence_document" class="anchor"></a><code>conflr::conflence_document</code>
</h3>
<p>conflr’s functionality is also available as a custom R Markdown format; You can specify <code><a href="https://rdrr.io/pkg/conflr/man/confluence_document.html">conflr::confluence_document</a></code> to <code>output</code> in the front matter of your R Markdown document.</p>
<p>For example, if you set the following front matter, pressing <code>Knit</code> button on RStudio (or running <code><a href="https://rdrr.io/pkg/rmarkdown/man/render.html">rmarkdown::render()</a></code>) will publish the R Markdown document to Confluence.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="an">title:</span><span class="co"> "title1"</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="an">output:</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">  conflr::confluence_document:</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">    space_key: "space1"</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">    update: true</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">---</span></span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a>...</span></code></pre></div>
<p>For the detail about available options, please refer to <a href="https://line.github.io/conflr/reference/confluence_document.html"><code><a href="https://rdrr.io/pkg/conflr/man/confluence_document.html">?confluence_document</a></code></a>.</p>
</div>
</div>
<div id="options" class="section level2">
<h2 class="hasAnchor">
<a href="#options" class="anchor"></a>Options</h2>
<p>conflr recognizes these options:</p>
<ul>
<li>
<code>conflr_supported_syntax_highlighting</code>: A character vector of languages that your Confluence supports the syntax highlighting in addition to the default languages (by default, <code>sql</code>, <code>cpp</code>, <code>python</code>, <code>html</code>, <code>css</code>, <code>bash</code>, and <code>yaml</code> are supported).</li>
<li>
<code>conflr_addin_clear_password_after_success</code>: If <code>TRUE</code>, unset <code>CONFLUENCE_PASSWORD</code> after the page is successfully uploaded via addin.</li>
</ul>
</div>
<div id="know-limitations" class="section level2">
<h2 class="hasAnchor">
<a href="#know-limitations" class="anchor"></a>Know limitations</h2>
<div id="latex-support" class="section level3">
<h3 class="hasAnchor">
<a href="#latex-support" class="anchor"></a>LaTeX support</h3>
<p>conflr supports <a href="https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#math-expressions">Math expressions</a> to some extent. But, it requires <a href="https://marketplace.atlassian.com/apps/1210882/latex-math">LaTeX Math addon</a> installed. Otherwise, you will see “unknown macro” errors on the page.</p>
</div>
<div id="htmlwidgets-eg-leaflet-plotly" class="section level3">
<h3 class="hasAnchor">
<a href="#htmlwidgets-eg-leaflet-plotly" class="anchor"></a>htmlwidgets (e.g. leaflet, plotly)</h3>
<p>conflr doesn’t support htmlwidgets-based packages like leaflet and plotly. Instead, you can embed the screenshot by setting <code>screenshot.force = TRUE</code> in the chunk option (c.f. <a href="https://bookdown.org/yihui/bookdown/html-widgets.html" class="uri">https://bookdown.org/yihui/bookdown/html-widgets.html</a>).</p>
</div>
</div>
<div id="advanced-usages" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced-usages" class="anchor"></a>Advanced Usages</h2>
<p>conflr is also a (non-complete) binding to <a href="https://developer.atlassian.com/server/confluence/confluence-server-rest-api/">Confluence’s REST API</a>. These low-level functions might be useful when you need to access to your Confluence programmatically.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">conflr</span>)

<span class="co"># list pages</span>
<span class="no">res</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/conflr/man/confl_content.html">confl_list_pages</a></span>(<span class="kw">spaceKey</span> <span class="kw">=</span> <span class="st">"foo"</span>)
<span class="kw pkg">purrr</span><span class="kw ns">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span>(<span class="no">res</span>$<span class="no">results</span>, <span class="st">"id"</span>)

<span class="co"># get page info</span>
<span class="no">page</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/conflr/man/confl_content.html">confl_get_page</a></span>(<span class="no">res</span>$<span class="no">results</span><span class="kw">[[</span><span class="fl">2</span>]]$<span class="no">id</span>)
<span class="no">page</span>$<span class="no">title</span>

<span class="co"># create a page</span>
<span class="no">new_page</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/conflr/man/confl_content.html">confl_post_page</a></span>(
  <span class="kw">spaceKey</span> <span class="kw">=</span> <span class="st">"foo"</span>,
  <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Test"</span>,
  <span class="kw">body</span> <span class="kw">=</span> <span class="kw pkg">glue</span><span class="kw ns">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span>(
    <span class="st">'&lt;ac:structured-macro ac:name="code"&gt;
     &lt;ac:plain-text-body&gt;&lt;![CDATA[this is my code]]&gt;&lt;/ac:plain-text-body&gt;
     &lt;/ac:structured-macro&gt;
    '</span>))
<span class="no">new_page</span>$<span class="no">`_links`</span></pre></div>
</div>
<div id="how-to-contribute" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-contribute" class="anchor"></a>How to contribute</h2>
<p>See <a href="https://github.com/line/conflr/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">Copyright</span> (C) <span class="dv">2019</span> LINE Corporation</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a>This program is free software<span class="op">:</span><span class="st"> </span>you can redistribute it and<span class="op">/</span>or modify</span>
<span id="cb9-4"><a href="#cb9-4"></a>it under the terms of the GNU General Public License as published by</span>
<span id="cb9-5"><a href="#cb9-5"></a>the Free Software Foundation, version <span class="fl">3.</span></span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a>This program is distributed <span class="cf">in</span> the hope that it will be useful,</span>
<span id="cb9-8"><a href="#cb9-8"></a>but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span id="cb9-9"><a href="#cb9-9"></a>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span id="cb9-10"><a href="#cb9-10"></a>GNU General Public License <span class="cf">for</span> more details.</span>
<span id="cb9-11"><a href="#cb9-11"></a></span>
<span id="cb9-12"><a href="#cb9-12"></a>You should have received a copy of the GNU General Public License</span>
<span id="cb9-13"><a href="#cb9-13"></a>along with this program.  If not, see <span class="op">&lt;</span>http<span class="op">:</span><span class="er">//</span>www.gnu.org<span class="op">/</span>licenses<span class="op">/</span><span class="er">&gt;</span>.</span></code></pre></div>
<p>See <a href="https://github.com/line/conflr/blob/master/LICENSE.md">LICENSE.md</a> for more detail.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=conflr">https://​cloud.r-project.org/​package=conflr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/line/conflr/">https://​github.com/​line/​conflr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/line/conflr/issues">https://​github.com/​line/​conflr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Hiroaki Yutani <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/line/conflr"><img src="https://travis-ci.org/line/conflr.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://CRAN.R-project.org/package=conflr"><img src="https://www.r-pkg.org/badges/version/conflr" alt="CRAN status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Hiroaki Yutani.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
